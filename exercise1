create database InventoryManagement;
use InventoryManagement;

create table products (
	productID int primary key not null auto_increment,
    productName varchar(100),
    quantity int 
);

create table inventoryChanges (
	changeID int primary key not null auto_increment,
    productID int not null,
    oldQuantity int,
    newQuantity int,
    changeDate datetime,
    foreign key (productID) references products (productID)
);
	DELIMITER $$
	create trigger AfterProductUpdate
    after update on products
    for each row 
    begin 
    insert into inventoryChanges(productID,oldQuantity,newQuantity,changeDate)
    values 
    (OLD.productID,OLD.quantity,NEW.quantity,NOW());
    end $$
    DELIMITER ;
    
